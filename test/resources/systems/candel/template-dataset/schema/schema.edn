[
 ;; Schema metadata
 {:db/ident             :unify.schema/metadata
  :unify.schema/name    :org.parkerici/candel
  :unify.schema/version "1.3.1"}

 ;; Dataset
 {:db/ident       :dataset/name
  :db/unique      :db.unique/value
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The name of the dataset, must be unique and 256 character maximum"}
 {:db/ident       :dataset/doi
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The digital object identifier (DOI) of the dataset"}
 {:db/ident       :dataset/description
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "A short, free text description of the dataset"}
 {:db/ident       :dataset/url
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "Dataset URL"}
 {:db/ident       :dataset/assays
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of assays for this dataset"}
 {:db/ident       :dataset/samples
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of samples for this dataset"}
 {:db/ident       :dataset/subjects
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of subjects for this dataset"}
 {:db/ident       :dataset/treatment-regimens
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of treatment regimens for this dataset"}
 {:db/ident       :dataset/timepoints
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of timepoints for this dataset"}
 {:db/ident       :dataset/study-days
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of study days for this dataset"}
 {:db/ident       :dataset/clinical-observation-sets
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of clinical observation sets for this dataset"}

 ;;  Subject
 {:db/ident       :subject/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the subject. Must be unique within this dataset (but not within the entire database)"}
 {:db/ident       :subject/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for subjects"}
 {:db/ident       :subject/sex
  :db/valueType   :db.type/ref                              ;; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The sex of the subject. Refers to idents in the 'sex' namespace"}
 {:db/ident       :subject/age
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The age of the subject in years"}
 {:db/ident       :subject/smoker
  :db/valueType   :db.type/ref                              ;;enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The smoking status of the subject. Refers to idents in the 'smoker' namespace"}
 {:db/ident       :subject/HLA-A-type
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "The HLA-A type of the subject, as a string"}
 {:db/ident       :subject/HLA-B-type
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "The HLA-B type of the subject, as a string"}
 {:db/ident       :subject/HLA-C-type
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "The HLA-C type of the subject, as a string"}
 {:db/ident       :subject/HLA-DR-type
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "The HLA-DR type of the subject, as a string"}
 {:db/ident       :subject/HLA-DP-type
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "The HLA-DP type of the subject, as a string"}
 {:db/ident       :subject/HLA-DQ-type
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "The HLA-DQ type of the subject, as a string"}
 {:db/ident       :subject/dead
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Whether the subject is dead or not"}
 {:db/ident       :subject/cause-of-death
  :db/valueType   :db.type/ref                              ; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The cause of death for the subject. Refers to idents in the subject.cause.of.death namespace"}
 {:db/ident       :subject/menopause
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Whether the subject has undergone menopause or not"}
 {:db/ident       :subject/race
  :db/valueType   :db.type/ref                              ;; enum
  :db/cardinality :db.cardinality/many
  :db/doc         "The race of the subject, refers to idents in the 'race' namespace"}
 {:db/ident       :subject/ethnicity
  :db/valueType   :db.type/ref                              ;; enums
  :db/cardinality :db.cardinality/one
  :db/doc         "The ethnicity of the subject, refers to idents in the 'ethnicity' namespace"}
 {:db/ident       :subject/comorbidities
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The comorbidities of the subject"}
 {:db/ident       :subject/therapies
  :db/valueType   :db.type/ref
  :db/isComponent true
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of therapies for this subject. Note that every subject must have a value for this attribute
                          even when all the subjects in the dataset received the same therapy (or therapies)"}
 {:db/ident       :subject/meddra-disease
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The disease (i.e. cancer type) of this subject according to the MedDRA classification"}
 {:db/ident       :subject/freetext-disease
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The disease (i.e. cancer type) of this subject in free text form"}
 {:db/ident       :subject/metastatic-disease
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Whether the disease is metastatic"}

 ;; Clinical observation set

 {:db/ident       :clinical-observation-set/name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The name of this clinical-observation-set"}
 {:db/ident       :clinical-observation-set/description
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The description for this clinical-observation-set"}
 {:db/ident       :clinical-observation-set/clinical-observations
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of clinicial observations for this clinical-observation-set"}
 {:db/ident       :clinical-observation-set/adverse-events
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of adverse events for this clinical-observation-set"}
 {:db/ident       :clinical-observation-set/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for clinical-observation-set"}


 ;; Clinical observation
 {:db/ident       :clinical-observation/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the clinical observation. Must be unique within this dataset (but not within the entire database)"}
 {:db/ident       :clinical-observation/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for clinical observation"}
 {:db/ident       :clinical-observation/subject
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The subject that this clinical observation was performed in"}
 {:db/ident       :clinical-observation/timepoint
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The timepoint at which this observation was performed"}
 {:db/ident       :clinical-observation/study-day
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The study-day at which this observation was performed"}
 {:db/ident       :clinical-observation/recist
  :db/valueType   :db.type/ref                              ;; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The RECIST (Response Evaluation Critera in Solid Tumors) score for this observation,
                          refers to idents in the 'recist' namespace"}
 {:db/ident       :clinical-observation/bor
  :db/valueType   :db.type/ref                              ;; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The best overall response (RECIST) of the subject. Such observations should be connected to the End of Study (EOS) timepoint"}
 {:db/ident       :clinical-observation/dcb
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Whether this patient has experienced Durable Clinical Benefit. Such observations should be connected to the End of Study (EOS) timepoint"}
 {:db/ident       :clinical-observation/ir-recist
  :db/valueType   :db.type/ref                              ;; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The irRECIST (Immune Related Response Evaluation Critera in Solid Tumors) score for this observation,
                          refers to idents in the 'ir.recist' namespace"}
 {:db/ident       :clinical-observation/pfs
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "The progression free survival of the subject in months. Such observations should be connected to the End of Study (EOS) timepoint"}
 {:db/ident       :clinical-observation/pfs-reason
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The reason (e.g. progression, censoring etc.) supplied for clinical observation PFS.
                          Refers to entities in the :clinical-observation.event-reason namespace.
                          See https://candel.parkerici.org/schema/#representing-data-for-survival-analysis-eg-pfs-os-etc for more information
                          about modeling survival data"}
 {:db/ident       :clinical-observation/pfs-event
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "If PFS observation is censored (use false as the value) or connected to an event (use true)"}
 {:db/ident       :clinical-observation/dfi
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "The length of time (in months) the length of time after primary treatment for a cancer ends
                          that the patient survives without any signs or symptoms of that cancer. Such observations should
                          be connected to the End of Study (EOS) timepoint"}
 {:db/ident       :clinical-observation/dfi-reason
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The reason (e.g. progression, censoring etc.) supplied for clinical observation DFI.
                          Refers to entities in the :clinical-observation.event-reason namespace.
                          See https://candel.parkerici.org/schema/#representing-data-for-survival-analysis-eg-pfs-os-etc for more information
                          about modeling survival data"}
 {:db/ident       :clinical-observation/dfi-event
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "If DFI observation is censored (use false as the value) or connected to an event (use true)"}
 {:db/ident       :clinical-observation/psa
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "PSA (Prostate-specific antigen) measurement from blood, in ng/mL"}
 {:db/ident       :clinical-observation/ctc
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "CTC (Ciculating Tumor Cells) measurement from blood, in CTC/7.5 mL whole blood"}
 {:db/ident       :clinical-observation/ca19-9
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "CA19-9 (Cancer Antigen 19-9) measurement from blood, in U/mL"}
 {:db/ident       :clinical-observation/rano
  :db/valueType   :db.type/ref                              ;; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "RANO (Response Assessment in Neuro-Oncology) assessment for brain tumor patients (MRI-based)"}

 {:db/ident       :clinical-observation/tumor-sum-diam
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "The sum of the tumor diameters in mm"}
 {:db/ident       :clinical-observation/tumor-sum-diam-perc-change
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "The percent change in the tumor sum of diameters. Must be a number in [-1 1]"}
 {:db/ident       :clinical-observation/os
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "The overall survival of the subject in months. Such observations should be connected to the End of Study (EOS) timepoint."}
 {:db/ident       :clinical-observation/os-reason
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The reason (e.g. progression, censoring etc.) supplied for clinical observation OS.
                          Refers to entities in the :clinical-observation.event-reason namespace.
                          See https://candel.parkerici.org/schema/#representing-data-for-survival-analysis-eg-pfs-os-etc for more information
                          about modeling survival data"}
 {:db/ident       :clinical-observation/os-event
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "If OS observation is censored (use false as the value) or connected to an event (use true)"}
 {:db/ident       :clinical-observation/ttf
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "The time to treatment failure of the subject in months. Such observations should be connected to the End of Study (EOS) timepoint"}
 {:db/ident       :clinical-observation/ttf-reason
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The reason (e.g. progression, censoring etc.) supplied for clinical observation TTF.
                          Refers to entities in the :clinical-observation.event-reason namespace.
                          See https://candel.parkerici.org/schema/#representing-data-for-survival-analysis-eg-pfs-os-etc for more information
                          about modeling survival data"}
 {:db/ident       :clinical-observation/ttf-event
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "If TTF observation is censored (use false as the value) or connected to an event (use true)"}
 {:db/ident       :clinical-observation/disease-stage
  :db/valueType   :db.type/ref                              ;; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The stage of the disease. Refers to entities in the 'disease.stage' namespace. This is a clinical-observation
                          in order to allow the possibility for re-staging (even though technically tumor stage is not a time-varying
                          concept)"}
 {:db/ident       :clinical-observation/bmi
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "The body mass index of the subject. Unless more information is available,
                          such observations should be connected to the baseline timepoint"}
 {:db/ident       :clinical-observation/metastatic
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Indicates that the disease has become metastatic"}
 {:db/ident       :clinical-observation/metastasis-gdc-anatomic-sites
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The GDC anatomic site(s) at which metastasis have been observed"}
 {:db/ident       :clinical-observation/recurrence
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Indicates that the disease has recurred"}
 {:db/ident       :clinical-observation/ldh
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Lactate Dehydrogenase (LDH) measurement in blood, expressed in U/L"}
 {:db/ident       :clinical-observation/absolute-monocyte-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The absolute monocyte count expressed in number of cells per microliter "}
 {:db/ident       :clinical-observation/absolute-leukocyte-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The absolute leukocyte count expressed in number of cells per microliter "}

 ;; Adverse Event
 {:db/ident       :adverse-event/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for the AE"}
 {:db/ident       :adverse-event/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the AE. Must be unique within this dataset (but not within the entire database)"}
 {:db/ident       :adverse-event/subject
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The subject that this AE was observed in"}
 {:db/ident       :adverse-event/timepoint
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The timepoint at which this AE was observed"}
 {:db/ident       :adverse-event/study-day
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The study day on which this AE was observed"}
 {:db/ident       :adverse-event/verbatim-adverse-event
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "Adverse event in free text form, verbatim as reported by provider"}
 {:db/ident       :adverse-event/meddra-adverse-event
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "Adverse event coded per MedDRA classification"}
 {:db/ident       :adverse-event/ctcae-grade
  :db/valueType   :db.type/ref                              ; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "Grade of the adverse event. Refer to idents in the ae.grade namespace"}
 {:db/ident       :adverse-event/ae-duration
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Duration of the AE in days"}
 {:db/ident       :adverse-event/ae-start-relative-day
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Study-relative-day of the reported start of the AE"}
 {:db/ident       :adverse-event/ae-causality
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "Causality analysis for the AE. Refer to idents in the ae.causality namespace"}

 ;; Therapy
 {:db/ident       :therapy/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the therapy. Must be unique within this dataset (but not within the entire database)"}
 {:db/ident       :therapy/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for the therapy"}
 {:db/ident       :therapy/treatment-regimen
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The treatment regimen that corresponds to this therapy"}
 {:db/ident       :therapy/line
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The line of therapy for this subject (e.g. first line, second line etc.) as an integer"}
 {:db/ident       :therapy/previous
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "Previous types of therapy for this patient. Refers to entities in the therapy.previous namespace"}
 {:db/ident       :therapy/order
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The order of this therapy in this subject's treatment history"}
 {:db/ident       :therapy/dlt-evaluable
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Whether the subject is part of the DLT-evaluable population for this therapy"}
 {:db/ident       :therapy/safety-evaluable
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Whether the subject is part of the safety-evaluable population for this therapy"}
 {:db/ident       :therapy/cohort
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "This attribute can be used to assign a subject to an arbitrary cohort for this therapy
                          (e.g. Phase 1 vs Phase 2). Note that this is just an arbitrary string that is not checked
                          for consistency and does not represent a formal grouping in a parent entity"}


 ;; Treatment regimen
 {:db/ident       :treatment-regimen/name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The name of the treatment regimen. Must be unique within this dataset but not
                          necessarily within the database"}
 {:db/ident       :treatment-regimen/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for treatment-regimens"}
 {:db/ident       :treatment-regimen/clinical-trial
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The clinical trial that this treatment regimen is part of (if any)"}
 {:db/ident       :treatment-regimen/trial-arm
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The arm of the clinical trial that this treatment regimen is part of (if any)"}
 {:db/ident       :treatment-regimen/drug-regimens
  :db/valueType   :db.type/ref
  :db/isComponent true
  :db/cardinality :db.cardinality/many
  :db/doc         "The drug regimens that constitute this treatment regimen"}
 {:db/ident       :treatment-regimen/setting
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The setting (e.g. adjuvant) of this treatment regimen. Refers to idents in the 'treatment.setting namespace'"}

 ;; Timepoint
 {:db/ident       :timepoint/treatment-regimen
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The treatment regimen that this timepoint is part of. Note that timepoints that have a :timepoint/relative-order
                          attribute MUST refer to a treatment regimens. Timepoints that do not have such attribute may exist outside
                          of any treatment-regimen"}
 {:db/ident       :timepoint/type
  :db/valueType   :db.type/ref                              ;; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The type of this timepoint, refers to idents in the 'timepoint' namespace. The type of the timepoint is meant to
                          represent both logical timepoints that exist outside of any chronological timeline (e.g. 'baseline'), as well
                          as nominal timepoints within a treatment regimen (e.g. 'treatment1'). This field is mandatory"}
 {:db/ident       :timepoint/offset
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The offset in number of days (positive or negative) between this specific timepoint and the nominal timepoint
                          indicate by its :timepoint/attribute. For instance to indicate two timepoints that are 5 days before and after
                          the first treatment, you would create two timepoint entities both with type :timepoint/treatment1 and with offsets
                          -5 and +5 respectively"}
 {:db/ident       :timepoint/id
  :db/valueType   :db.type/string
  :db/unique      :db.unique/identity
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the timepoint. This is unique within the dataset, but not necessarily within the database. If this timepoint
                          is associated with a treatment regimen, the id must to start with the treatment regimen followed by the
                          character '/'. The rest of the id is free format"} ; Note: modify the validations
 {:db/ident       :timepoint/relative-order
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The relative order of this timepoint within its treatment regimen. This field is mandatory for
                          timepoints that have a :timepoint/treatment-regimen attribute"}
 {:db/ident       :timepoint/cycle
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "If applicable, the cycle of therapy that this timepoint represents"} ; add to the validations
 {:db/ident       :timepoint/day
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "If applicable, the day in the cycle of therapy that this timepoint represents"} ; add to the validations
 {:db/ident       :timepoint/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for timepoints"}


 ;; Study day

 {:db/ident       :study-day/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the study day"}
 {:db/ident       :study-day/day
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The days since the reference event"}
 {:db/ident       :study-day/reference-event
  :db/valueType   :db.type/ref                              ;; Refers to entities in the study.day.reference.event
  :db/cardinality :db.cardinality/one
  :db/doc         "The reference event (e.g. study enrollment) that study days are counted from. Refers
                          to entities in the study.day.reference.event namespace"}
 {:db/ident       :study-day/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for study days"}


 ;; Drug Regimen
 {:db/ident       :drug-regimen/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the drug regimen"}
 {:db/ident       :drug-regimen/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for this drug regimen"}
 {:db/ident       :drug-regimen/drug
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The drug used in this regimen"}
 {:db/ident       :drug-regimen/freetext-drug
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The drug used in this regimen in free text form"}
 {:db/ident       :drug-regimen/cycle-length
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Length of the drug cycle (in days)"}

 ;; Assay
 {:db/ident       :assay/name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The name of the assay, must be unique within the dataset, but not within the entire database"}
 {:db/ident       :assay/description
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "A free text description for this assay"}
 {:db/ident       :assay/technology
  :db/valueType   :db.type/ref                              ;;enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The technology used for this assay. Refers to idents in the 'technology' namespace"}
 {:db/ident       :assay/measurement-sets
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of measurement sets for this assay"}
 {:db/ident       :assay/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/unique      :db.unique/identity
  :db/cardinality :db.cardinality/one
  :db/doc         "Synthetic unique ID for assays"}

 ;; Measurement-set
 {:db/ident       :measurement-set/name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The name of the measurement set (e.g. 'baseline'). Must be unique within the scope of the parent assay"}
 {:db/ident       :measurement-set/description
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "A description for this measurement-set. A measurement set groups together measurements that are related. It can
                          be used to indicate concepts such as:
                            1) Measurements that were performed as part of a separate experimental condition
                            2) Measurements that are derived from a separate computational analysis, e.g. a separate clustering run
                               os a separate run of a variant calling pipeline"}
 {:db/ident       :measurement-set/measurements
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The measurement values for this measurement set"}
 {:db/ident       :measurement-set/measurement-matrices
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The measurement values for this measurement set as matrix blobs (dense or sparse)"}
 {:db/ident       :measurement-set/analysis-repository
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "git remote of the repository containing the analysis code that generated this measurement-set"}
 {:db/ident       :measurement-set/analysis-docker
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "A link to the docker image for the container used to run the analysis"}
 {:db/ident       :measurement-set/terra-namespace
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The Terra namespace associated with the pipeline that generated this measurement-set."}
 {:db/ident       :measurement-set/terra-workspace
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The Terra workspace associated with the pipeline that generated this measurement-set."}
 {:db/ident       :measurement-set/terra-workflow
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The Terra worfklow associated with the pipeline that generated this measurement-set."}
 {:db/ident       :measurement-set/terra-submission-id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the Terra submission associated with the pipeline that generated this measurement-set"}
 {:db/ident       :measurement-set/cellengine-experiment-revision-id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the specific revision of the CellEngine experiment that generated this measurement-set"}
 {:db/ident       :measurement-set/cell-populations
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The cell populations that are referenced by measurements in this measurement-set"}
 {:db/ident       :measurement-set/otus
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The OTU's that are referenced by measurements in this measurement-set"}
 {:db/ident       :measurement-set/atac-peaks
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The ATAC peaks that are referenced by measurements in this measurement-set"}
 {:db/ident       :measurement-set/tcrs
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The TCRs that are referenced by measurements in this measurement-set"}
 {:db/ident       :measurement-set/single-cells
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The single cells that are referenced by measurements in this measurement-set"}
 {:db/ident       :measurement-set/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for measurement-set"}
 {:db/ident       :measurement-set/normalization-method
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "Freetext description of the normalization method used for measurements contained in the measurement-set
                           (ie for gene expression measurements, normalization by housekeeping gene values)"}
 {:db/ident       :measurement-set/image-scale-um-per-pixel-x
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "X-dimension scale factor for imaging data in um per pixel"}
 {:db/ident       :measurement-set/image-scale-um-per-pixel-y
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Y-dimension scale factor for imaging data in um per pixel"}


 ;; cell-population
 {:db/ident       :cell-population/name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The name of this cell population, must be unique within the scope of this measurement-set"}
 {:db/ident       :cell-population/from-clustering
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Flag indicating whether this cell population was derived from automatic clustering
                          (i.e. as opposed to manual gating)"}
 {:db/ident       :cell-population/positive-markers
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "Reference to markers (i.e. epitopes) whose presence contributes to defining
                          this cell population. This does not have to be an exhaustive list as it is meant
                          to represent concepts such as Ki67+ CD4 T cells"}
 {:db/ident       :cell-population/negative-markers
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The opposite of :cell-population/positive-markers"}
 {:db/ident       :cell-population/cell-type
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The cell-type represented by this cell-population. This is mandatory for populations
                          that have not been defined by clustering"}
 {:db/ident       :cell-population/parent
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The cell-population that is a parent of this cell-population. This is meant to
                          represent gating hierarchies"}
 {:db/ident       :cell-population/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for cell-populations"}

 ;; Single cells
 {:db/ident       :single-cell/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "The id for a given single cell. Must be uniquely identifying, so often a concatenation, e.g. sample-barcode."}

 {:db/ident       :single-cell/cell-populations
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "Any cell populations to which this cell has been assigned membership, e.g. via clustering."}

 {:db/ident       :single-cell/sample
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The sample from which this single cell was sourced."}

 {:db/ident       :single-cell/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for single cells."}

 ;; imaging-derived coordinates for single cells:
 {:db/ident       :single-cell/normalized-image-coordinate-x
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "X coordinate in normalized image coordinate scheme for segment centroid"}
 {:db/ident       :single-cell/normalized-image-coordinate-y
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Y coordinate in normalized image coordinate scheme for segment centroid"}
 {:db/ident       :single-cell/pixel-image-offset-x
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "X coordinate in pixel offset (upper left coordinates) for segment centroid"}
 {:db/ident       :single-cell/pixel-image-offset-y
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Y coordinate in pixel offset (upper left coordinates) for segment centroid"}
 {:db/ident       :single-cell/image-segment-area
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Area (in pixels) of image segment"}

 ;; Measurement
 ;; measurements encapsulate the concept of "unit" (see the different fpm, fpkm, rpkm etc. attributes)
 {:db/ident       :measurement/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the measurement. Must be unique within this dataset (but not within the entire database)"}
 {:db/ident       :measurement/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for measurements"}
 {:db/ident       :measurement/sample
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The biological sample this measurement was performed on"}
 {:db/ident       :measurement/region-of-interest
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "For imaging data, the region of interest that this measurement refers to"}
 {:db/ident       :measurement/gene-product
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The target gene product for this measurement"}
 {:db/ident       :measurement/variant
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The target variant for this measurement"}
 {:db/ident       :measurement/cnv
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The target cnv for this measurement"}
 {:db/ident       :measurement/epitope
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The target protein epitope for this measurement"}
 {:db/ident       :measurement/tcr
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The target T Cell Receptor (TCR) for this measurement"}
 {:db/ident       :measurement/cell-population
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The target cell population for this measurement"}
 {:db/ident       :measurement/atac-peak
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The target ATAC peak for this measurement"}
 {:db/ident       :measurement/nanostring-signature
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The target nanostring signature for this measurement"}
 {:db/ident       :measurement/otu
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The target OTU for this measurement"}
 {:db/ident       :measurement/percent-of-total-cells
  :db/valueType   :db.type/float                            ;; [0, 1]
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the abundance of a specific cell-populations, expressed
                          as the percentage of the total number of cells in the sample (in [0, 1], mostly useful for flow cytometry assays)"}
 {:db/ident       :measurement/median-channel-value
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a median channel (protein) value of a cytometry population or cluster"}
 {:db/ident       :measurement/tpm
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a TPM value (Transcripts Per Kilobase Million, a measure
                          of gene expression in RNAseq experiments)"}
 {:db/ident       :measurement/fpkm
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a FPKM value (Fragments Per Kilobase Million, a measure
                          of gene expression in RNAseq experiments)"}
 {:db/ident       :measurement/rsem-raw-count
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the RSEM raw count, i.e. the estimated number of fragments
                          derived from a given gene (see https://www.biostars.org/p/106127/)"}
 {:db/ident       :measurement/rsem-scaled-estimate
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the RSEM scaled estimate, i.e. the fraction of transcripts
                          made up by a given gene (see https://www.biostars.org/p/106127/)"}
 {:db/ident       :measurement/rsem-normalized-count
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the RSEM normalized count. This is a transformation where
                          for gene level estimates you divide all raw-count values by the 75th percentile of the column (after removing zeros) and multiply that by 1000. This
                          transforms each sample so that the values are relative the 75th percentile with a x1000 adjustment factor (see https://www.biostars.org/p/106127/).
                          Most papers that analyze TCGA data use log2(rsem-normalized-count + 1)"}
 {:db/ident       :measurement/rpkm
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a RPKM value (Reads Per Kilobase Million, a measure
                          of gene expression in RNAseq experiments)"}
 {:db/ident       :measurement/segment-mean-lrr
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the mean Log R Ratio (LRR) of a CNV (Copy Number Variation) segment. This is equal
                          to log2(copy-number / 2) for a genomic segment"}
 {:db/ident       :measurement/kallisto-abundance
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "The kallisto estimated abundance (pseudoalignment method). Abundances should sum to 1e6.
                          See https://pachterlab.github.io/kallisto/about for more information."}
 {:db/ident       :measurement/absolute-cn
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the absolute copy number of a segment"}
 {:db/ident       :measurement/a-allele-cn
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the copy number of the A allele"}
 {:db/ident       :measurement/b-allele-cn
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the copy number of the B allele"}
 {:db/ident       :measurement/baf-n
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the allelic fraction of the B allele in normal tissue, for a copy number variation segment"}
 {:db/ident       :measurement/baf
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the allelic fraction of the B allele in tumor tissue, for a copy number variation segment"}
 {:db/ident       :measurement/loh
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement demonstrates a loss of heterozygosity (LOH) for a copy number variation segment"}
 {:db/ident       :measurement/t-alt-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the read depth supporting the variant allele in the tumor sequencing output"}
 {:db/ident       :measurement/t-ref-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the read depth supporting the reference allele in the tumor sequencing output"}
 {:db/ident       :measurement/t-depth
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the read depth across this locus in the tumor sequencing output"}
 {:db/ident       :measurement/n-alt-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the read depth supporting the variant allele in the normal sequencing output"}
 {:db/ident       :measurement/n-ref-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the read depth supporting the reference allele in the normal sequencing output"}
 {:db/ident       :measurement/n-depth
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the read depth across this locus in the normal sequencing output"}
 {:db/ident       :measurement/vaf
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the variant allele frequency of a variant"}
 {:db/ident       :measurement/nanostring-count
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a gene expression count from Nanostring"}
 {:db/ident       :measurement/tcr-clonality
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a TCR clonality measurement. Note that in this case
                          the entity will not have a specific TCR target."}
 {:db/ident       :measurement/tcr-frequency
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the frequency of a specific T Cell Receptor (TCR)"}
 {:db/ident       :measurement/tcr-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the counts of a specific T Cell Receptor (TCR)"}
 {:db/ident       :measurement/tcr-v
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Use this attribute if the measurement represents the hits for possible V gene segment linking to a specific T Cell Receptor (TCR)"}
 {:db/ident       :measurement/tcr-d
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Use this attribute if the measurement represents the hits for possible D gene segment linking to a specific T Cell Receptor (TCR)"}
 {:db/ident       :measurement/tcr-j
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Use this attribute if the measurement represents the hits for possible J gene segment linking to a specific T Cell Receptor (TCR)"}
 {:db/ident       :measurement/cell-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the number of cells in a specific cell-population"}
 {:db/ident       :measurement/percent-of-parent
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the abundance of a specific cell-populations, expressed
                          as the percentage of its parent population"}
 {:db/ident       :measurement/percent-of-nuclei
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the abundance of a specific cell-populations, expressed
                          as the percentage of the total number of nucleated cells (mostly useful for imaging assays)"}
 {:db/ident       :measurement/percent-of-lymphocytes
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the abundance of a specific cell-populations, expressed
                          as the percentage of the total number of lymphocytes in the sample (mostly useful for flow cytometry assays"}
 {:db/ident       :measurement/percent-of-leukocytes
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the abundance of a specific cell-populations, expressed
                          as the percentage of the total number of leukocytes in the sample (mostly useful for flow cytometry assays"}
 {:db/ident       :measurement/percent-of-live
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the abundance of a specific cell-populations, expressed
                          as the percentage of the total number of live cells in the sample (mostly useful for flow cytometry assays"}
 {:db/ident       :measurement/percent-of-singlets
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the abundance of a specific cell-populations, expressed
                          as the percentage of the total number of singlets in the sample (mostly useful for flow cytometry assays"}
 {:db/ident       :measurement/image-intensity-sum
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Per-segment intensity (sum) for a given epitope (marker channel)"}
 {:db/ident       :measurement/image-intensity-mean
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Per-segment intensity (mean) for a given epitope (marker channel)"}
 {:db/ident       :measurement/image-intensity-median
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Per-segment intensity (median) for a given epitope (marker channel)"}

 ;; Measurement matrices, which store measurements in blob format on s3, backed by unify matrix syntax.
 {:db/ident       :measurement-matrix/backing-file
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/value
  :db/doc         "Generated by unify: the s3 key where the matrix tsv file will be uploaded."}
 {:db/ident       :measurement-matrix/name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The unique name identifying this measurement matrix within the measurement set scope."}
 {:db/ident       :measurement-matrix/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for measurement-matrix"}

 ;; TODO: figure out how to be schema agnostic on read for this? Kind to say which attribute holds this value?
 ;; OR MAYBE SCRAP, readers can infer from the header of the file if it's dense or sparse. Just use indication for
 ;; {:db/ident           :measurement-matrix/sparse} ;; boolean


 ;; Note: explicit attributes for all reference targets for measurement matrices. We parse these from the files and
 ;; add as reference to the matrix (naively in Datomic, so an unordered set).
 {:db/ident       :measurement-matrix/samples
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The set of all samples referenced in this measurement matrix file."}
 {:db/ident       :measurement-matrix/cell-populations
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The set of all cell populations referenced in this measurement matrix file."}
 {:db/ident       :measurement-matrix/epitopes
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The set of all epitopes referenced in this measurement matrix file."}
 {:db/ident       :measurement-matrix/gene-products
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The set of all gene products referenced in this measurement matrix file."}
 {:db/ident       :measurement-matrix/single-cells
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The set of all single cells referenced in this measurement matrix file."}

 ;; Note: this points to a measurement attribute, e.g. :measurement/fpkm, :measurement/ng-mL, :measurement/mfi etc.
 {:db/ident       :measurement-matrix/measurement-type
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The measurement attribute which matches the type of values stored in this measurement matrix file."}

 ; Note: add validation that the following don't have any target
 {:db/ident       :measurement/singlets-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the number of singlets in a sample (mostly useful for
                          flow cytometry assays. Note that in this case the measurement will not target any specific cell-population"}
 {:db/ident       :measurement/live-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the number of live cells in a sample (mostly useful for
                          flow cytometry assays. Note that in this case the measurement will not target any specific cell-population"}
 {:db/ident       :measurement/live-percent
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the percentage of live cells in a sample.
                          Note that in tihs case the measurement will not have a target cell population"}
 {:db/ident       :measurement/lymphocyte-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the number of lymphocytes in a sample (mostly useful for
                          flow cytometry assays. Note that in this case the measurement will not target any specific cell-population"}
 {:db/ident       :measurement/leukocyte-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the number of leukocytes in a sample (mostly useful for
                          flow cytometry assays. Note that in this case the measurement will not target any specific cell-population"}
 {:db/ident       :measurement/nuclei-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the number of nuclei in a sample (mostly useful for
                          imaging assays. Note that in this case the measurement will not target any specific cell-population"}
 {:db/ident       :measurement/average-depth
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the average sequencing depth of a sample.
                          Note that in this case the measurement will not have any target"}
 {:db/ident       :measurement/fraction-aligned-reads
  :db/valueType   :db.type/float                            ; [0, 1]
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the fraction of aligned reads in a sample
                          (expressed as a number in [0, 1]). Note that in this case the measurement will not have any target"}
 {:db/ident       :measurement/total-reads
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the total number of reads in a sample.
                          Note that in this case the measurement will not have any target"}
 {:db/ident       :measurement/read-count
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the count of reads for a specific target"}
 {:db/ident       :measurement/olink-npx
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents npx units (i.e. Normalized protein expression
                          from an Olink assay, https://www.olink.com/question/what-is-npx/)"}
 {:db/ident       :measurement/read-count-otu
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the count of reads for a specific OTU"}
 {:db/ident       :measurement/read-count-otu-rarefied
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the rarefied count of reads for a specific OTU"}
 {:db/ident       :measurement/tumor-purity
  :db/valueType   :db.type/float                            ; [0, 1]
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the tumor purity of a sample
                          (expressed as a number in [0, 1]). Note that in this case the measurement will not have any target"}
 {:db/ident       :measurement/contamination
  :db/valueType   :db.type/float                            ; [0, 1]
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the fraction of reads that do not come from this sample
                          (expressed as a number in [0, 1]). Note that in this case the measurement will not have any target"}
 {:db/ident       :measurement/tss-score
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the TSS score of the sample (relevant for ATACseq data).
                          Note that in this case the measurement will not have any target"}
 {:db/ident       :measurement/fraction-reads-in-peaks
  :db/valueType   :db.type/float                            ; [0, 1]
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the fraction of reads that are assigned to a peak in a sample
                          (relevant for ATACesq data and expressed as a number in [0, 1]). Note that in this case the measurement will not have any target"}


 {:db/ident       :measurement/cfdna-ng-mL
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a concentration of cell-free DNA (cfDNA) in blood, expressed as ng/mL"}
 {:db/ident       :measurement/pg-mL
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a concentration expressed as pg/mL"}
 {:db/ident       :measurement/ng-mL
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a concentration expressed as ng/mL"}
 {:db/ident       :measurement/U-L
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a concentration expressed as units (U) /L"}
 {:db/ident       :measurement/chromvar-tf-binding-score
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a transcription factor binding score
                          as calculated by chromVAR"}
 {:db/ident       :measurement/luminex-mfi
  :db/cardinality :db.cardinality/one
  :db/valueType   :db.type/float
  :db/doc         "Use this attribute if the measurement represents MFI (Mean Fluorescence Intensity) for a Luminex Multiplex Immunoassay."}
 {:db/ident       :measurement/nanostring-signature-score
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the score for a nanostring signature"}
 {:db/ident       :measurement/tmb-total
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Tumor mutational burden expressed as the total number of mutations (SNVs + indels) per Mb sequenced"}
 {:db/ident       :measurement/tmb-snv
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Tumor mutational burden expressed as the total number of SNVs per Mb sequenced"}
 {:db/ident       :measurement/tmb-indel
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Tumor mutational burden expressed as the total number of indels per Mb sequenced"}

 ;; measurements: new in 1.0
 {:db/ident       :measurement/msi-status
  :db/valueType   :db.type/ref                              ; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the MSI (Microsatellite Instability) status of
                           the tumor as determined by either IHC or sequencing. This attribute refers to enums in the 
                           :measurement.msi-status namespace."}
 {:db/ident       :measurement/cnv-call
  :db/valueType   :db.type/ref                              ; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the CNV overall gain (gain, loss, or neutral)
                           for a genetic region (cnv). This attribute refers to enums in the :measurement.cnv-call namespace."}
 {:db/ident       :measurement/cells-per-mm2
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the number of cells per mm2 of tissue, as measured by
                           an imaging assay (ie IHC, Vectra, CODEX, etc.). This measurement type can be paired with a cell-population
                           target (:measurement/cell-population) or used alone to denote the total cell density. Note that this attribute
                           should only be used if a whole-cell segmentation method was used to segment the image."}
 {:db/ident       :measurement/array-log-ratio
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the log ratio of a two channel gene expression array
                          usually expressed as log2(sample/reference) with sample as the Cy5 (red) channel and reference as the Cy3 (green) channel)"}
 {:db/ident       :measurement/array-log-intensity
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a log intensity equivalent to a one channel gene expression array
                          (ie Affymetrix) -- log2 scaled intensity values."}
 {:db/ident       :measurement/protein-array-log-intensity
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents a log intensity equivalent to one channel protein expression array."}
 {:db/ident       :measurement/nuclei-per-mm2
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the number of nuclei per mm2 of tissue, as measured by
                           an imaging assay (ie IHC, Vectra, CODEX, etc.). This measurement type can be paired with a cell-population
                           target (:measurement/cell-population) or used alone to denote the total cell density. Note that this attribute
                           should only be used if a nuclei-only segmentation method was used to segment the image."}
 {:db/ident       :measurement/tcr-alpha-clonality
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the clonality (range 0-1) of TCR alpha sequences a sample.
                           This measurement type is common when TCR sequences are computationally derived from RNAseq data
                           and thus alpha and beta pairing is not known."}
 {:db/ident       :measurement/tcr-beta-clonality
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Use this attribute if the measurement represents the clonality (range 0-1) of TCR alpha sequences a sample.
                           This measurement type is common when TCR sequences are computationally derived from RNAseq data
                           and thus alpha and beta pairing is not known."}





 ;; Sample
 {:db/ident       :sample/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the sample. Must be unique within a dataset, but not necessarily within the database"}
 {:db/ident       :sample/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for samples"}
 {:db/ident       :sample/subject
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The subject that this sample was derived from"}
 {:db/ident       :sample/type
  :db/valueType   :db.type/ref                              ;;enum tumor/normal
  :db/cardinality :db.cardinality/one
  :db/doc         "The type of this sample (tumor / normal), refers to idents in the 'sample.type' namespace"}
 {:db/ident       :sample/specimen
  :db/valueType   :db.type/ref                              ;;enum ffpe/blood etc/
  :db/cardinality :db.cardinality/one
  :db/doc         "The specimen type for this sample, refers to idents in the 'sample.specimen' namespace"}
 {:db/ident       :sample/container
  :db/valueType   :db.type/ref                              ;;enum ffpe/blood etc/
  :db/cardinality :db.cardinality/one
  :db/doc         "The container that was initially used to collect this sample (if known), e.g. CPT tube, EDTA tube etc.
                          Refers to idents in the 'sample.container' namespace"}
 {:db/ident       :sample/tissue-acquisition-method
  :db/valueType   :db.type/ref                              ;; enum surgical resection, biopsy, etc.
  :db/cardinality :db.cardinality/one
  :db/doc         "The method by which this tissue sample was acquired. This attribute refers to enums in the :sample.tissue-acquisition-method namespace."}

 {:db/ident       :sample/laterality
  :db/valueType   :db.type/ref                              ; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "For tumors in paired organs, designates the side on which the specimen was obtained. This attribute
                          was derived from GDC and refers to entities in the 'sample.laterality' namespace"}
 {:db/ident       :sample/timepoint
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The timepoint when this sample was collected"}
 {:db/ident       :sample/study-day
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The study day when this sample was collected"}
 {:db/ident       :sample/tumor-type
  :db/valueType   :db.type/string                           ; TODO [Lacey 9-24-2018] For now a string, eventually move to an enum following GDC data dictionary or point to disease reference entity
  ;:db/valueType           :db.type/ref       ;;enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The tumor type. This is presently a string, but needs to be moved to an enum"}
 {:db/ident       :sample/gdc-anatomic-site
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The anatomical location from which this sample was collected according to the Genomics Data Commons (GDC) vocabulary"}
 {:db/ident       :sample/freetext-anatomic-site
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The anatomical location from which this sample was collected in free text form"}
 {:db/ident       :sample/metastasis
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Whether this is a sample from a metastasis"}
 {:db/ident       :sample/recurrence
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Whether this is a sample from a recurrence"}

 ;; Clinical trial

 ;; GK -- removed UID

 {:db/ident       :clinical-trial/nct-number
  :db/valueType   :db.type/string
  :db/unique      :db.unique/identity
  :db/cardinality :db.cardinality/one
  :db/doc         "The NCT number of the clinical trial. Must be unique within the database"}
 {:db/ident       :clinical-trial/other-ids
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Alternative identifiers for this clinical trial"}
 {:db/ident       :clinical-trial/name-long
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The full name of this clinical trial"}
 {:db/ident       :clinical-trial/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for clinical trial"}
 {:db/ident       :clinical-trial/name-short
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "A short name for this clinical trial"}

 ;; Epitope
 {:db/ident       :epitope/id
  :db/valueType   :db.type/string
  :db/unique      :db.unique/value
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the epitope. This is unique within the database.
                           The id is a string constructed by joining using '/' the following fields:
                           1) the protein uniprot ID
                           2) the modifications, in alphabetical order"}
 {:db/ident       :epitope/protein
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The protein of which this is an epitope. May be more than one, e.g. in the case of heterodimers."}
 {:db/ident       :protein/modifications
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Post-translational modification to the protein, as a string"}


 ;; Protein
 {:db/ident       :protein/uniprot-name
  :db/valueType   :db.type/string
  :db/unique      :db.unique/identity
  :db/cardinality :db.cardinality/one
  :db/doc         "The UniProt name for the protein, unique within the database. This is the UniProt
                          name minus the '_HUMAN' part (e.g. 'PDCD1_HUMAN' becomes 'PDCD1')"}
 {:db/ident       :protein/preferred-name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The UniProt preferred name of the protein"}
 {:db/ident       :protein/synonyms
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "A list of synonyms for this protein"}
 {:db/ident       :protein/uniprot-accessions
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "A list of UniProt accession IDs for this protein"}
 {:db/ident       :protein/cd-antigen
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The CD Nomenclature for this protein (when applicable)"}
 {:db/ident       :protein/gene
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The gene that encodes for this protein"}

 ;; Gene
 {:db/ident       :gene/hgnc-symbol
  :db/valueType   :db.type/string
  :db/unique      :db.unique/identity
  :db/cardinality :db.cardinality/one
  :db/doc         "The HGNC symbol for this gene, must be unique within the database"}
 {:db/ident       :gene/hgnc-id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The HGNC id for this gene. These ids are stable even if the symbol changes"}
 {:db/ident       :gene/hgnc-name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The HGNC name"}
 {:db/ident       :gene/previous-hgnc-symbols
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Previous symbols for this gene"}
 {:db/ident       :gene/previous-hgnc-names
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Previous names for this gene"}
 {:db/ident       :gene/alias-hgnc-symbols
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Alternative symbols for this gene"}
 {:db/ident       :gene/alias-hgnc-names
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Alternative names for this gene"}
 {:db/ident       :gene/hgnc-prev-symbols
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Previous HGNC symbols for this gene"}
 {:db/ident       :gene/refseq-accession
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The RefSeq accession for this gene"}
 {:db/ident       :gene/ucsc-id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The UCSC id for this gene"}
 {:db/ident       :gene/ensembl-id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The ENSEMBL id for this gene"}
 {:db/ident       :gene/hgnc-locus-group
  :db/valueType   :db.type/ref                              ; enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The HGNC locus group"}
 {:db/ident       :gene/date-hgnc-symbol-changed
  :db/valueType   :db.type/instant
  :db/cardinality :db.cardinality/one
  :db/doc         "The date the HGNC symbol changed last"}
 {:db/ident       :gene/date-hgnc-name-changed
  :db/valueType   :db.type/instant
  :db/cardinality :db.cardinality/one
  :db/doc         "The date the HGNC name changed last"}
 {:db/ident       :gene/genomic-coordinates
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The genomic coordinate for this gene. Can be multiple because of different genome assemblies"}

 ;; Genomic coordinate
 {:db/ident       :genomic-coordinate/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "The id of this genomic coordinate as a string 'assembly:contig:strand:start:end'. Must be unique within the database"}
 {:db/ident       :genomic-coordinate/assembly
  :db/valueType   :db.type/ref                              ;;enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The reference genomic assembly for this coordinate, refers to idents in the 'assembly' namespace"}
 {:db/ident       :genomic-coordinate/contig
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The genomic contig (e.g. the chromosome) for this coordinate as a string"}
 {:db/ident       :genomic-coordinate/strand
  ;:db/valueType           :db.type/ref        ;;enum
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The strand for this coordinate, either '+' or '-'"}
 {:db/ident       :genomic-coordinate/start
  :db/valueType   :db.type/long                             ; We need to decide on 0 or 1-based indexing
  :db/cardinality :db.cardinality/one
  :db/doc         "The start position for this coordinate as an integer"}
 {:db/ident       :genomic-coordinate/end
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The end position for this coordinate as an integer"}


 ;; CNV
 {:db/ident       :cnv/genomic-coordinates
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The coordinates of this Copy Number Variation (CNV) segment"}
 {:db/ident       :cnv/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "ID of the coordinates of the CNV segment. Identical to genomic coordinate ID."
  :db/unique      :db.unique/identity}
 {:db/ident       :cnv/genes
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of genes included in this CNV segment"}

 ;; Variant
 {:db/ident       :variant/id
  :db/unique      :db.unique/identity
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "Globally unique id for this variant. This is constructed by joining using '/' the
                          coordinates, ref-allele and alt-allele"}
 {:db/ident       :variant/quick-summary
  :db/cardinality :db.cardinality/one
  :db/valueType   :db.type/string
  :db/doc         "Summarized name for variant as [hgnc_symbol]-[HGSVp]"}

 {:db/ident       :variant/gene
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The gene for this variant"}
 {:db/ident       :variant/genomic-coordinates
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The coordinates of this variant"}
 {:db/ident       :variant/coordinate-string
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The coordinate string (summarized genomic coordinate info) for this variant."}
 {:db/ident       :variant/ref-allele
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The reference allele for this variant"}
 {:db/ident       :variant/alt-allele
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The alternate allele for this variant"}
 {:db/ident       :variant/alt-allele-2
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The 2nd alternate allele for this variant"}
 {:db/ident       :variant/ref-amino-acid
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The reference one letter coded amino acid sequence for this variant (ie A, R)"}
 {:db/ident       :variant/alt-amino-acid
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The alternate one letter coded amino acid sequence for this variant (ie A, R)"}
 {:db/ident       :variant/dbSNP
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "A list of dbSNP (https://www.ncbi.nlm.nih.gov/projects/SNP/) ids for this variant"}
 {:db/ident       :variant/HGVSc
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The HGVSc string for this variant, see http://varnomen.hgvs.org/"}
 {:db/ident       :variant/HGVSp
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "The HGVSp strings for this variant, see http://varnomen.hgvs.org/"}
 {:db/ident       :variant/type
  :db/valueType   :db.type/ref                              ;; enum snp/del/ins
  :db/cardinality :db.cardinality/one
  :db/doc         "The type of this variant, refers to idents in the 'variant.type' namespace"}
 {:db/ident       :variant/classification
  :db/valueType   :db.type/ref                              ;; enum intron/UTR/frameshit etc.
  :db/cardinality :db.cardinality/one
  :db/doc         "The classification of this variant, refers to idents in the 'variant.classification' namespace"}
 {:db/ident       :variant/neo-antigens
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of neo-antigens associated with this variant"}
 {:db/ident       :variant/feature-type
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The type of feature (transcript, regulatory, motif), refers to idents in the 'variant.feature.type' namespace"}
 {:db/ident       :variant/so-consequences
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/many
  :db/doc         "The functional consequence of the variant, in sequence ontology terms (http://www.sequenceontology.org/).
                          Refers to so-sequence-feature entities"}
 {:db/ident       :variant/impact
  :db/valueType   :db.type/ref                              ;enum
  :db/cardinality :db.cardinality/one
  :db/doc         "The impact modifier for this variant. Refers to entities in the variant.impact namespace"}
 {:db/ident       :variant/publication
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "DOI of publication associated with this variant, as a string"}
 {:db/ident       :variant/exac-af
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "Global allele frequency from ExAC, in range [0, 1]. See http://exac.broadinstitute.org/"}
 {:db/ident       :variant/exac-af-adj
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Adjusted global allele frequency from ExAC, in range [0, 1]. See http://exac.broadinstitute.org/"}
 {:db/ident       :variant/exac-afr
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "African/African-American allele frequency from ExAC, in range [0, 1]. See http://exac.broadinstitute.org/"}
 {:db/ident       :variant/exac-amr
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "American allele frequency from ExAC, in range [0, 1]. See http://exac.broadinstitute.org/"}
 {:db/ident       :variant/exac-eas
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "East Asian allele frequency from ExAC, in range [0, 1]. See http://exac.broadinstitute.org/"}
 {:db/ident       :variant/exac-fin
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Finnish allele frequency from ExAC, in range [0, 1]. See http://exac.broadinstitute.org/"}
 {:db/ident       :variant/exac-nfe
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Non-Finnish European allele frequency from ExAC, in range [0, 1]. See http://exac.broadinstitute.org/"}
 {:db/ident       :variant/exac-oth
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Other allele frequency from ExAC, in range [0, 1]. See http://exac.broadinstitute.org/"}
 {:db/ident       :variant/exac-sas
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "South Asian allele frequency from ExAC, in range [0, 1]. See http://exac.broadinstitute.org/"}
 {:db/ident       :variant/context
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The reference allele per VCF specs, and its five flanking base pairs"}
 {:db/ident       :variant/cosmic
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Overlapping COSMIC variants"}


 ;; neo-antigen
 {:db/ident       :neo-antigen/mut-peptide
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The mutated peptide for this neo-antigen"}
 {:db/ident       :neo-antigen/wt-peptide
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The wildtype peptide for this neo-antigen"}
 {:db/ident       :neo-antigen/wt-score
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "The score associated with the wildtype peptide"}
 {:db/ident       :neo-antigen/mut-score
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "The score associated with the mutated peptide"}
 {:db/ident       :neo-antigen/HLA-allele
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The HLAAllele for this neo-antigen"}


 ;; Chromatin Accesible region
 {:db/ident       :chr-acc-reg/genomic-coordinates
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The coordinates of this chromatin accessible region"}

 ;; Cell type
 {:db/ident       :cell-type/co-id
  :db/valueType   :db.type/string
  :db/unique      :db.unique/identity
  :db/cardinality :db.cardinality/one
  :db/doc         "Cell Ontology ID of the cell type, see http://obofoundry.org/ontology/cl.html"}
 {:db/ident       :cell-type/co-name
  :db/valueType   :db.type/string
  :db/unique      :db.unique/identity
  :db/cardinality :db.cardinality/one
  :db/doc         "Cell Ontology name of the cell type, see http://obofoundry.org/ontology/cl.html"}
 {:db/ident       :cell-type/synonyms
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Other names for the cell type"}
 {:db/ident       :cell-type/description
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "Cell Ontology description of the cell type, see http://obofoundry.org/ontology/cl.html"}
 {:db/ident       :cell-type/comment
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "Additional information about the cell type"}
 {:db/ident       :cell-type/xref
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "External ontology references for the cell type, see http://obofoundry.org/ontology/cl.html"}
 {:db/ident       :cell-type/parents
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Cell Ontology IDs for parent cell types"}


 ;; T Cell Receptor (TCR)
 {:db/ident       :tcr/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The ID of the TCR, formed as a string by combining the tcr-alpha-1, tcr-alpha-2, and tcr-beta
                          separated by /, prefer nucleotide sequence if present, but if not available fall back to AA seq."}
 {:db/ident       :tcr/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/unique      :db.unique/identity
  :db/cardinality :db.cardinality/one
  :db/doc         "The UID (context aware) ID for this TCR."}
 {:db/ident       :tcr/alpha-1
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The sequence, in amino acid terms, of the first TCR alpha chain, if present"}
 {:db/ident       :tcr/alpha-2
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The sequence, in amino acid terms, of the second TCR alpha chain, if present"}
 {:db/ident       :tcr/beta
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The sequence, in amino acid terms, of the TCR beta chain, if present"}

 ; Comorbidity
 {:db/ident       :comorbidity/name
  :db/unique      :db.unique/identity
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The name of the comorbididty. Must be unique within the database"}
 {:db/ident       :comorbidity/synonyms
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "Synonyms for the comorbidity"}

 ;;Import metadata

 {:db/ident       :import/name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/value
  :db/doc         "Globally unique import name, created as part of the import entity"}
 {:db/ident       :import/user
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "User executing the import, created as part of the import entity"}
 {:db/ident       :import/bucket
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/value
  :db/doc         "Bucket ID of the storage location for the import data and config files"}


 {:db/ident       :import/txn-id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/value
  :db/doc         "Globally unique transaction ID, added to each transaction within an import job (batching)"}
 {:db/ident       :import/import
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "reference to the import entity, added to each transaction within an import job (batching)"}




 ;; Drug
 {:db/ident       :drug/preferred-name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/value
  :db/doc         "The globally unique, preferred name of the drug. In the WHODrug dictionary
                          this corresponds to the drug that, for a given Drug Record Number, has the Drug Code with
                          Seq1 = '01' and Seq2 = '001' (refer to the WHODrug user manual"}
 {:db/ident       :drug/record-number
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/value
  :db/doc         "The globally unique, WHO Drug Record Number for this drug. The Drug Record Number corresponds
                          to the first six characters of the Drug Code (refer to the WHODrug user manual"}
 {:db/ident       :drug/variations
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "A list of variations associated with this drug. Variations include different salts,
                          preparations or commercial names of the same active moiety. These variations all have
                          the same Record Number but different Seq1 and Seq2 values"}
 {:db/ident       :drug/sdg-group
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The group from the Standardised Drug Groupings dataset that this drug belongs to"}

 ;; MedDRA disease
 {:db/ident       :meddra-disease/preferred-name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/value
  :db/doc         "The globally unique, MedDRA preferred name of the disease"}

 {:db/ident       :meddra-disease/synonyms
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/many
  :db/doc         "A list of synonyms for the disease. These are MedDRA lowest level terms associated
                          with this preferred term"}

 ;; GDC Anatomic site
 {:db/ident       :gdc-anatomic-site/name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/value
  :db/doc         "A globally unique name for an anatomic site, as defined in the
                          Genomics Data Commons (GDC)"}


 ;; Gene product

 {:db/ident       :gene-product/id
  :db/unique      :db.unique/identity
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the gene product. In most cases this corresponds to the id of the gene"}
 {:db/ident       :gene-product/gene
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The gene that this gene product was derived from"}

 ;; ATAC peak

 {:db/ident       :atac-peak/name
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The name of the ATAC peak. Must be unique within the scope of the measurement-set"}
 {:db/ident       :atac-peak/genomic-coordinates
  :db/valueType   :db.type/ref
  :db/cardinality :db.cardinality/one
  :db/doc         "The genomic coordinates of the ATAC peak"}
 {:db/ident       :atac-peak/quality-score
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The quality score for the peak. This is calculated as int(-10*log10qvalue)"}
 {:db/ident       :atac-peak/summit-offset
  :db/valueType   :db.type/long
  :db/cardinality :db.cardinality/one
  :db/doc         "The offset of the peak summit from the beginning of the region"}
 {:db/ident       :atac-peak/jointly-called
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Whether this peak was derived by jointly calling on multiple samples"}
 {:db/ident       :atac-peak/fixed-width
  :db/valueType   :db.type/boolean
  :db/cardinality :db.cardinality/one
  :db/doc         "Whether this peak was called in fixed width mode, i.e. all of the peaks are the same width,
                          and have the summit of the peak as their center"}
 {:db/ident       :atac-peak/-log10pvalue
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "-log10 of the p-value for local Poisson test at peak"}
 {:db/ident       :atac-peak/-log10qvalue
  :db/valueType   :db.type/float
  :db/cardinality :db.cardinality/one
  :db/doc         "Similar to -log10pvalue, but after Benjamini-Hochberg correction"}
 {:db/ident       :atac-peak/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for atac-peaks"}

 ; Nanostring signature
 {:db/ident       :nanostring-signature/name
  :db/unique      :db.unique/identity
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The name of the nanostring signature"}

 {:db/ident       :nanostring-signature/gene-weights
  :db/valueType   :db.type/tuple
  :db/tupleTypes  [:db.type/ref :db.type/double]
  :db/cardinality :db.cardinality/many
  :db/doc         "The list of genes that are used to calculate this nanostring signature, together
                          with their score"}

 ; Sequence Ontology sequence feature

 {:db/ident       :so-sequence-feature/name
  :db/unique      :db.unique/identity
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The name of the sequence feature from Sequence Ontology"}
 {:db/ident       :so-sequence-feature/id
  :db/unique      :db.unique/identity
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The Sequence Ontology id of this sequence feature"}


 ; OTU
 {:db/ident       :otu/id
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The id of the OTU"}
 {:db/ident       :otu/uid
  :db/valueType   :db.type/tuple
  :db/tupleType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/unique      :db.unique/identity
  :db/doc         "Synthetic unique ID for OTU"}
 {:db/ident       :otu/kingdom
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The taxonomic kingdom for this OTU"}
 {:db/ident       :otu/phylum
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The taxonomic phylum for this OTU"}
 {:db/ident       :otu/class
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The taxonomic class for this OTU"}
 {:db/ident       :otu/order
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The taxonomic order for this OTU"}
 {:db/ident       :otu/family
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The taxonomic family for this OTU"}
 {:db/ident       :otu/genus
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The taxonomic genus for this OTU"}
 {:db/ident       :otu/species
  :db/valueType   :db.type/string
  :db/cardinality :db.cardinality/one
  :db/doc         "The taxonomic species for this OTU"}]



;; -- END CORE SCHEMA --



;; KEGG Pathway
;{
;    :db/ident               :KEGGPathway/name
;    :db/valueType           :db.type/string
;    :db/unique              :db.unique/value
;    :db/cardinality         :db.cardinality/one
;}

;; GOTerm
;{
;    :db/ident               :GOTerm/name
;    :db/valueType           :db.type/string
;    :db/unique              :db.unique/value
;    :db/cardinality         :db.cardinality/one
;}
;{
;    :db/ident               :GOTerm/description
;    :db/valueType           :db.type/string
;    :db/cardinality         :db.cardinality/one
;}

;; Geneset
;{
;    :db/ident               :geneset/name
;    :db/valueType           :db.type/string
;    :db/unique              :db.unique/value
;    :db/cardinality         :db.cardinality/one
;}

;; Analysis
;{
;    :db/ident               :analysis/description
;    :db/valueType           :db.type/string
;    :db/cardinality         :db.cardinality/one
;    :db/index               true
;}
;{
;    :db/ident               :analysis/repository
;    :db/valueType           :db.type/string     ;; repo of the code to reproduce
;    :db/cardinality         :db.cardinality/one
;    :db/index               true
;}
;{
;    :db/ident               :analysis/commit
;    :db/valueType           :db.type/string     ;; commit in the repo
;    :db/cardinality         :db.cardinality/one
;    :db/index               true
;}
;{
;    :db/ident               :analysis/type
;    :db/valueType           :db.type/ref     ;; enum
;    :db/cardinality         :db.cardinality/one
;}
;{
;    :db/ident               :analysis/results
;    :db/valueType           :db.type/ref
;    :db/cardinality         :db.cardinality/many
;    :db/isComponent         true
;}

;; Analysis result
;{
;    :db/ident               :analysisResult/target
;    :db/valueType           :db.type/ref
;    :db/cardinality         :db.cardinality/one
;}
;{
;    :db/ident               :analysisResult/pvalue
;    :db/valueType           :db.type/float
;    :db/cardinality         :db.cardinality/one
;    :db/index               true
;}
;{
;    :db/ident               :analysisResult/fdr
;    :db/valueType           :db.type/float
;    :db/cardinality         :db.cardinality/one
;    :db/index               true
;}
;{
;    :db/ident               :analysisResult/observation
;    :db/valueType           :db.type/ref        ;; enum
;    :db/cardinality         :db.cardinality/one
;}
